<!doctype html>
<html>

<head>
	<!-- <link rel="stylesheet" type="text/css" href="static/css/logout.css"> -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="../static/bootstrap/bootstrap_litera.min.css">
	<link rel="stylesheet" type="text/css" href="../static/css/default_style.css">
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" />

	<link href="https://fonts.googleapis.com/css?family=Dosis:400,700,900" rel="stylesheet">
    <style>
    *{
        text-align: left;
		font-family: Dosis !important;
		font-weight: 300;
    }
    form {
        width: 100%;
    }
	strong {
		font-weight: 700;
	}
    .card {
        margin-top: 15px;
        height: calc(100% - 15px);
        max-height: calc(100vh - 30px - 24px - 15px)
    }
	.card-title {
		font-size:17px;
	}
	#wineryWines .card-body .card:first-child {
		margin-top:0px;
	}
    .card.middle {
        max-height: calc(66vh - 30px - 24px - 15px)
    }
    .card-body {
        overflow: auto;
    }
	#wineryWines .card-body  {
		padding: 7px;
	}
	#chart {
		/*min-height: 500px;*/
	}
	a.btn.btn-secondary, a.btn.btn-success {
		border-radius: 2px;
		padding: 2px;
		width: 100%;
		text-decoration: none;
	}
	#wineryWines a.btn.btn-secondary, #wineryWines a.btn.btn-success:last-child {
		margin-top:5px;
	}
	.path {
		stroke-dasharray: 4500;
		stroke-dashoffset: 4500;
		animation: dash 2s linear alternate infinite;
	}

	@keyframes dash {
		from { stroke-dashoffset: 5000; }
		to { stroke-dashoffset: 0; }
	}

	#bottle g { transform: scale(.10) translate(-750px, 50px); }
	#bottle {
		width: 100%;
		height: 100%;
	}
	#bottle svg{
		display: block;
		margin: auto;
	}
	.c3 svg g g.c3-axis.c3-axis-y,.c3 svg g g.c3-axis.c3-axis-x {
		font-size: 11px;
	}
	.c3-axis-y-label {
		font-size: 12px;
	}
	#climate .card-body {
		padding-left:0px;
		padding-right:10px;
	}
	#stn-info {
		float: right;
		font-size: 15px;
		vertical-align: middle;
	}
    </style>
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-dark">
		<ul class="navbar-nav mr-auto">
			<li class="nav-item active" style="color: white; margin-right: 10px">
				WineMapper&emsp;<strong>Winery Overview</strong>
			</li>
		</ul>
		<ul class="navbar-nav">
            <li class="nav-item">
                <button class="btn-secondary nav"><a href="/">Back to Map</a></button>
            </li>
			{% if loggedin %}
			<li class="nav-item">
				<button class="btn-secondary nav"><a class="nav-link" href="/openProfile">Profile</a></button>
			</li>
			{% endif %}
			<li class="nav-item">
				<button class="btn-secondary nav">
				{% if loggedin %}
				<a class="nav-link" href="\logout">Log Out</a>
				{% else %}
				<a class="nav-link" href="\login">Log In</a>
				{% endif %}
				</button>
			</li>
		</ul>
	</nav>
	<div class="container-fluid">
        <div class="row">
			<div class="col-md-8">
				<div class="row">
				<div class="col-md-6">
					<div class="card middle" id="wineryOverview">
					<h6 class="card-header">Overview of {{winery[1]}}</h6>
					<div class="card-body">
						<h7 class="card-title"></h7>
						<!-- <p class="card-text"> -->
							<strong>Address: </strong>{{winery[4]}}<br>
							<strong>Coordinates: </strong>{{winery[2]}}, {{winery[3]}}<span id="wineryLatLon"></span><br>
							<strong>Most Reviews By: </strong><span id="reviewer"></span><br>
								<!-- <ul id="wineryMostReviews"></ul> -->
							<div class="card" style="margin-top: 0px; border-width:0px">

								<div class="card-body" style="padding: 5px">
									<div class="card-text"></div>
									<div class="card-text" id="numreviews" style="font-style: italic;"></div>
								</div>
							</div>
							<!-- </p> -->
						<!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
					</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="card middle" id="winerySoil">
					<h6 class="card-header">Soil Characteristics at {{winery[1]}}</h6>
					<div class="card-body">
						<!-- <h7 class="card-title">This page will show data for WineryID: {{id}}.</h7> -->
						<div class="card-text">With supporting text below as a natural lead-in to additional content.With supporting text b.</div>
						<!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
					</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="card" id="climate">
					<h6 class="card-header">Historical Climate Data:<span id="stn-info"></span></h6>
					<div class="card-body">
						<div id="chart"></div>
						<div class="card-text" style="font-size: 12px; font-style: italic; padding-left:20px; float: right">Data from NCDC / NOAA <a href="https://www7.ncdc.noaa.gov/CDO/cdoselect.cmd?datasetabbv=GSOD&countryabbv&georegionabbv" target = _blank>Global Summary of the Day (GSOD)</a>, bucketed up to decade level
					</div>
						<!-- <div id="bottle">
						<svg width="70px" height="200px">
							<g>
								<path class="path" fill="none" stroke="#000000" stroke-width="30" stroke-miterlimit="10" d="M818,1782c0,0,35.569,51.542,196.045,44.627
								C1174.521,1819.713,1205,1782,1205,1782V737c0,0-2.896-88.072-66-140c-70.354-48.303-63.791-93-63.791-93L1078,195l6-11l1-47l-7-16
								l-0.209-22.836L952,97.746l-2.164,19.464L941,132v42.836L947,190v322c0,0,3.393,35.554-38,56c-41.393,20.446-84.65,76.434-89,159
								C815.65,809.566,818,1782,818,1782z"></path>
							</g>
						</svg>
					</div> -->
					</div>
					</div>
				</div>
			</div>
			</div>
			<div class="col-md-4">
				<!-- <div class="row"> -->
					<!-- <div class="col-md-12"> -->
				<div class="card" id="wineryWines">
				<h6 class="card-header">Wines from {{winery[1]}}</h6>
				<div class="card-body">
					<!-- <h7 class="card-title">This page will show data for WineryID: {{id}}.</h7> -->
					 {% for w in wines %}
					<div class="card">
						<!-- "<img class=\"card-img-top\" alt=\"Card image cap\">" + -->
						<div class="card-body" style="padding: 5px">
							<h7 class="card-title">{{w[1]}}</h7>
							<p class="card-text" style="font-family: Dosis!important">
								<strong>Average Price: </strong>
								{% if w[2] %}
									${{w[2]}}
								{% else %} 	Price not listed.
								{% endif %}
								<br>

								{% if w[16] %}
									<strong>Province: </strong>
									{% if w[17] %}
										<a href={{w[17]}} target = _blank>{{w[16]}}</a>
									{% else %} {{w[16]}}
									{% endif %}
									<br>
								{% endif %}

								{% if w[12] %}
									<strong>Region: </strong>
									{% if w[13] %}
										<a href={{w[13]}} target = _blank>{{w[12]}}</a>
									{% else %} {{w[12]}}
									{% endif %}
									<br>
								{% endif %}

								<strong>Variety: </strong>
								{% if w[8] %}
									{{w[8]}}
								{% else %} No information.
								{% endif %}
								<br>
								{% if w[9] %}
									<strong>Variety Description: </strong>
									{{w[9]}}
									<br>
								{% endif %}
								{% if w[4] %}
									<strong>Designation: </strong>
									{{w[4]}}
									<br>
								{% endif %}

								<!-- <span id="wineryAddress"></span> -->

							</p>
							<a onClick="checkLogin()" class="btn btn-success">Add to Favorites</a>
							<a href="/api/wineDetail?id={{w[0]}}" class="btn btn-secondary">Read Reviews</a>
						</div>
					</div>
					{% endfor %}
				</div>
				</div>
			</div>
		</div>
    </div>
    <script>
	var wineryid = {{wid}}
    </script>
	<script  src="../static/js/wineryDetail.js"></script>
	<script  src="../static/js/favorites.js"></script>
</body>

</html>
